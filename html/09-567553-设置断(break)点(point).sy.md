---
show: step
version: 1.0
enable_checker: true
---

# 设置断点 🥊

## 回忆上次内容

- `py` 文件的程序是按照顺序
  - 一行行挨排解释执行的
  - 我们可以 `pdb3 hello.py` 来对程序调试
- 顺序执行
	- 程序在文本中从上到下是一行行写的
	- 解释器是从上到下是一行行解释的
	- 调试也是从头到尾一行行执行的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220825-1661397382365)

- 但是这一行行的是在有点慢啊
- 毕竟我们都是经历过万行代码的人了
- 那得按10000次的n才能执行完啊？
- 有快点的方法吗？🤔

### 编辑、调试一条龙

- 上次我们是编写好py文件后
- 退到shell之后
- 再运行pdb3的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663316179521)

- 这次我们在vim里面运行pdb3

- :w|!pdb3 %
	- : 进入底行命令模式
	- | 并且
	- !pdb3 %
		- 用外部命令pdb3 
		- 运行当前文件 %
- 这和保存并运行很像
	- :w|!python3 %
- 连调试带修改一条龙了

### 查询帮助

- 没有思路的时候
- 就去查询帮助

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663316286878)

- 感觉这个break可能有用
- 去查查他的帮助
	- h break

### 设置断点

- break 的缩写 是 b

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663316426529)

- 可以对于py文件的行号设置断点

### 动手

- 给第5行添加了一个断(break)点(point)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663316737970)

- 那怎么快速让流程流到断点呢？
- 不会了就问帮助

### 求助帮助

- 运行到断点这个命令叫做continue
- continue 可以缩写为
	- cont
	- c

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663316971884)

- 可以让流程快速流转到断点
- 真的么？
- continue一下

### continue

- continue 让程序直接输出三行
- 然后直接到达断点

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663317086358)

- 为什么流程不往下继续流了呢？

### 断(break)点(point)

- 因为断点就是截断流程的点
- 流程流到这里必须断的点

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663318588293)

- 断点就像一个阀门(valve)
- 如果流到断点后
	- 我想让流程继续流(continue)
- 会如何呢？

### continue continue

- 由于后面没有新的断点

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663318649919)

- 流程会一直到python程序结束
- 把后面两行都输出完成
- 然后重新开始
- 又圜道了
- 如果这个时候再c呢？

### 流到断点

- 还是会流到断点
	- 只要断点存在
	- 就会continue到断点

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663318731454)

- 遇到断点必须要停下来
- 能否取消断点呢？
- 求助一下help

### clear

- clear 清除断点
	- cl 是clear的缩写


![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663318874663)

- 有两种清除方法
	 1. clear 文件名:行号
	 2. clear 断点编号
- 我们先试试第i种
	- clear 文件名:行号

### 清除断点

- b后面不加参数
	- 可以显示所有断点

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663319565055)


- clear guido.py:5
	- 清除guido.py第5行的断点
	- 清除之后
- 原来的断点消失了
- 还有一种清除断点的方式是如何的呢？
	-  clear 断点编号

### 清除某个断点

- 我们再在guido.py第5行建立一个断点
- 这个断点是2号断点
- 1号断点已经被clear了
- 现在断点从2开始编号

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663319919972)

- clear 2 
	- 可以清除这个断点
- 为什么要有断点呢？

### 断点的意义

- 我们想要找到程序中的问题
	- 被调试程序(debug)可能非常大
	- 可能有10000行😏
- 一步一步太慢
	- 所以要有断点
	- 直接跳到某个位置

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663320209428)

- 话说最早的那只活的`bug`🪰
	- 是谁找出来的呢？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210220-1613775864374)

### 计算之母

- 找到 `bug` 的第一个调试员或者叫程序员是一位女性
	- 她的名字叫 `Grace Murray Hopper`

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210811-1628645970342)

- 当时很多程序员都是女性

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220928-1664364729621/wm)

- 因为当时线缆很容易变得一团乱麻
	- 程序员的工作就是检查线路
	- 像绣花一样

### 编程和编织

- 编程和编织很像
	- 都是编
	- 所以需要很细心、有条理的人👩🏼‍🦱
	- 毕竟计算机源自提花织布机

- 和现在程序员大多是男性不同
	- 当时程序员大多都是女性

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220927-1664229114586)

- 今天仍能从男性程序员身上看到
	- 当初提花织布机的影响


### 故障

- 当时格蕾丝和她的同事们正艰难地搞清楚
	- 他们正在使用的马克 II 计算机
	- 到底出了什么问题
- 最后
  - 他们发现一只活蛾被困在控制电路的一个电子开关中
  - 这个问题就被命名为bug

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210916-1631788883985)

- 不要害怕 `bug`，因为 `bug` 是程序员存在的基础
	- 如果没有了`bug`，那也就不需要程序员了
	- 程序员本身就是 `bug` 一般的存在 🪰
- 让我们来 debug一下！🐥

### 设置3个断点

- 这次我要设置更多断点

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663320478722)

- 1,3,6行各一个断点


### 更多断点

- 断点可以把10000行程序分三段
	- 从而分段排查问题点

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663320754424)

- 然后尝试删除第2个

### 删除第2个断点

- 先 b 列出所有的断点
	- 我们要删除的2号断点
	- 位于guido.py的第3行

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220916-1663320815015)

- 删除成功
- 还剩下两个断点
- 断点就是这样新建删除的
- 下次可以更快速地调试了！！😁

## 总结

- 我们这次设置了断点
  - 设置断点的目的是更快地调试
  - 调试的目的是去除 `bug`
  - 别害怕 `bug`
  - 一步步地总能找到 `bug` 
  - 这就是程序员基本功
	- 调试 `debug` 
- 我心中还是有疑问
	- `guido.py` 是如何被解释执行的？🤔
- 我们下次再说！👋