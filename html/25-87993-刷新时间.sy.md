---
show: step
version: 1.0
enable_checker: true
---

# 刷新时间

## 回忆上次内容

- time 是一个 `module`
	- import 他可以做和时间相关的事情
	- time.time() 
		- 得到当前时间戳
	- time.localtime() 
		- 得到本地时间元组
		- local为本地
	- time.asctime() 
		- 得到时间日期字符串
		- asc为ascii
- 简略的写法为
    - asc_time = time.asctime()
	- `time.asctime()`
	- asctime 是 time 这个 module 里面的函数
- 现在想要自动刷新时间，怎么办？🤔

### 写 py 文件

- 要自动延迟
	- 首先要把这个东西制作成一个 py 文件
	- 我们继续编辑上次的 `show_time.py`

```shell
#编辑文件
vi show_time.py
```

- 写文件并运行
	- 把输出时间的语句
		- import time
		- print(time.asctime())
	- 写进 test.py 文件 中

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220930-1664546798626)

- `:w|!python3 %`
	- 保存并执行当前文件
	- 是可以执行的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220318-1647606865254)

- 怎么才能刷新呢？

### 搜索`python+延迟时间`

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210220-1613828880628)

- 立即行动
	- Now is better than never.
	- 做好过不做
- 不断寻找
- 打开
- 尝试

### 观察代码

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210220-1613828968027)

- 搜到的例子有点小错误
	- 主要是 while 后面的条件
	- 修改后的正确代码看后面

### 抄写并修改

- 新建一个sleep.py
	- 抄写下来，进行分析

```python
import time
i = 1
while i <= 3:
	print(i)
	i = i + 1
	time.sleep(1)
```

- 引入了 `time` 包
- i 是一个数字变量
  - 一开始的时候等于 `1`
- 注意 `while` 这一行
  - `while` 的循环条件是` i<=3`
  - 这就是缩进到里面的三行运行三次
  - 行尾有个半角冒号
  - 下面的三行都用<kbd>tab</kbd>空了 4 个字符
  - 这三行都是 while 要执行的循环体
  - 注意每行的缩进一定是 4 个字符
- time.sleep(1)
  - time 是 time 包
  - sleep(1)是函数调用
	- sleep是函数名 
	- 小括号对应函数调用
	- 参数是 1
	- 应该是愣(sleep) 1 秒的意思

### 进行改造

- 这里面的while True:
	- 相当于开了一个死循环
	- 持续不断地输出时间

```python
i = 1
while True:
	print(i)
	i = i + 1
	time.sleep(1)
```

- 原来只能循环 3 次
  - 现在无限循环
- 主要原因就是 while 的条件改成了 True
  - 注意 `True` 的首字母大写
  - while 后面缩进的三句话无限循环
- `:w|!python3 %`开始循环
  - <kbd>ctrl</kbd>+<kbd>c</kbd>跳出循环回 vi
- 如何理解这个sleep呢？

### 查看帮助

- help(time.sleep)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220930-1664547050943)

- 延迟一个秒数
- 秒数是浮点型的数字
- 可以把sleep的时间改成i么？


### 进行改造

```python
i = 1
while True:
	print(i)
	i = i + 1
	time.sleep(i)
```

- 可以看看延迟时间的变化
- 😄
- 看起来还是sleep(1)更合适


### 整合代码

- 现在我们就需要把两个文档整合到一起
  - 上面的sleep.py能够提供一个基本的延时循环结构
  - 下面的test.py能够得到当前时间并输出

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221007-1665148472369)

- 可以让他每隔一秒输出一个时间么？
	- 具体怎么整合看你的了！！！
	- 这次就到这里了
	- 尝试自己做出来哦

## 总结

- 通过搜索发现
	- time中有函数可以延迟
	    - `time.sleep(1)`
	- 还可以让程序无限循环
	  - `while True:`
- 现在需要两个程序的整合
	- 循环延迟输出
	- 时间输出

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220930-1664547170898)

- 怎么办？🤔
- 我们下次再说！👋
